# Set SITE via environment, e.g. SITE=192.168.1.50
# Then run: SITE=192.168.1.50 caddy run --config ops/Caddyfile

{$SITE}:443 {
  tls internal

  encode zstd gzip

  # Proxy Socket.IO to the Node server on 5174
  @socket path /socket.io* /socket.io/*
  reverse_proxy @socket http://127.0.0.1:5174

  # Everything else â†’ Vite dev server on 5173
  reverse_proxy http://127.0.0.1:5173
}
